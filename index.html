<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>UNDETALLIS — Aleatorio Sin Repetir</title>

<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3GFTY2SWSM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-3GFTY2SWSM');
</script>

<style>
    body {
        margin: 0;
        overflow: hidden;
        height: 100vh;
        width: 100vw;
        display: flex;
        align-items: center;
        justify-content: center;
        background: black;
        font-family: "Arial", sans-serif;
        padding: 20px;
        box-sizing: border-box;
    }
    #fondo {
        position: fixed;
        top: 0;
        left: 0;
        height: 110%;
        width: 110%;
        background-image: url('assets/fondo.jpg');
        background-size: cover;
        background-position: center;
        animation: fondoMovimiento 2.5s infinite ease-in-out alternate;
        filter: blur(4px) brightness(0.8);
        z-index: -1;
    }
    @keyframes fondoMovimiento {
        0% { transform: scale(1.02) translate(-8px, -5px); }
        100% { transform: scale(1.06) translate(6px, 5px); }
    }
    @keyframes rebote {
        0%   { opacity: 0; transform: scale(0.6); filter: blur(4px); }
        40%  { opacity: 1; transform: scale(1.08); }
        70%  { transform: scale(0.94); }
        100% { transform: scale(1); filter: blur(0); }
    }
    #fraseBox {
        max-width: 90%;
        padding: 35px 45px;
        background: white;
        color: black;
        font-size: 38px;
        font-weight: 900;
        border-radius: 24px;
        text-align: center;
        line-height: 1.25;
        box-shadow: 0 0 30px rgba(0,0,0,0.45);
        display: flex;
        justify-content: center;
        align-items: center;
        animation: rebote 0.8s ease-out;
        backdrop-filter: blur(6px);
    }
    @media (max-width: 600px) {
        #fraseBox {
            font-size: 28px;
            padding: 25px 30px;
        }
    }
</style>

<!-- ===================== -->
<!--   FIREBASE + LÓGICA   -->
<!-- ===================== -->
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
    import { getDatabase, ref, get, set } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBJjxw3ONW_WvUgTKeHALYdmUjTOXB0gFs",
      authDomain: "spicy-da7d7.firebaseapp.com",
      projectId: "spicy-da7d7",
      storageBucket: "spicy-da7d7.firebasestorage.app",
      messagingSenderId: "8855941044",
      appId: "1:8855941044:web:3607c0d43293fbc6490ce1",
      measurementId: "G-K5GK8HR3BE"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    /* ----------------------------- */
    /*      TUS 80 FRASES            */
    /* ----------------------------- */
    const frases = [
"Te reto a acercarte sin tocarme",
"Te reto a mantener la calma mientras yo no lo hago",
"Te reto a mirarme a los ojos sin sonreír",
"Te reto a decirme lo que quieres sin pensarlo demasiado",
"Te reto a no perderte cuando me acerque",
"Te reto a aguantar sin hablar mientras yo sí lo hago",
"Te reto a adivinar mis intenciones",
"Te reto a venir y demostrar que no eres tímido",
"Te reto a mantenerte firme cuando me acerque al oído",
"Te reto a resistir que te provoque un poco",
"Te reto a quedarte quieto mientras yo me muevo",
"Te reto a ignorarme por unos segundos",
"Te reto a decirme algo que normalmente no dirías",
"Te reto a mostrarme tu lado más travieso",
"Te reto a decirme lo que estás pensando",
"Te reto a dejarme sin palabras",
"Te reto a controlar tu sonrisa cuando te provoco",
"Te reto a mirarme como si me desearas",
"Te reto a acercarte… si puedes con la tensión",
"Te reto a mantener el control",
"Te reto a mostrarme lo impaciente que estás",
"Te reto a decirme algo que te gustaría probar",
"Te reto a no reaccionar cuando te toque",
"Te reto a poder conmigo cuando me pongo así",
"Te reto a tomar la iniciativa",
"Te reto a provocarme primero",
"Te reto a quedarte a pocos centímetros sin tocarme",
"Te reto a aguantar mi mirada sin huir",
"Te reto a hacerme perder la compostura",
"Te reto a confesar una fantasía ligera",
"Te reto a jugar conmigo un rato",
"Te reto a sorprenderme como quieras",
"Te reto a conquistarme otra vez",
"Te reto a decirme que no",
"Te reto a dejarme con ganas",
"Te reto a hacer algo atrevido ahora mismo",
"Te reto a empezar tú",
"Te reto a ignorarme cuando te provoco",
"Te reto a decirme tu pensamiento más atrevido",
"Te reto a controlar mis ganas",
"Te reto a mostrarme tu energía más intensa",
"Te reto a escapar de esta tensión",
"Te reto a besarme sin tocar mis manos",
"Te reto a venir sin avisar",
"Te reto a hacerme perder la paciencia",
"Te reto a aguantar mi lado travieso",
"Te reto a decirme cómo quieres que siga",
"Te reto a adelantarte a mí",
"Te reto a acercarte sin que lo note",
"Te reto a provocarme solo con palabras",
"Te reto a no pensar en lo que haré",
"Te reto a dejarme sin aliento",
"Te reto a tomar el control un rato",
"Te reto a mantenerte tranquilo",
"Te reto a adivinar lo que quiero",
"Te reto a decírmelo sin filtros",
"Te reto a intensificar este momento",
"Te reto a hacerme sonrojar",
"Te reto a mantenerte cerca… muy cerca",
"Te reto a resistir esta tentación",
"Te reto a actuar como si no te importara",
"Te reto a acercarte ahora mismo",
"Te reto a soltarme una indirecta atrevida",
"Te reto a marcar tú el ritmo",
"Te reto a no huir de lo que te provoca",
"Te reto a soportar mi silencio",
"Te reto a hacerme perder la concentración",
"Te reto a confesar lo que deseas",
"Te reto a no apartar la mirada",
"Te reto a mantenerte calmado cuando me acerque más",
"Te reto a pensar en algo más que no sea yo",
"Te reto a ganar este juego",
"Te reto a ser más atrevido que yo",
"Te reto a ser directo",
"Te reto a hacer que te extrañe",
"Te reto a decirme la verdad: ¿te provoco?",
"Te reto a evitar acercarte",
"Te reto a mostrarme tu lado más intenso",
"Te reto a no caer en mis juegos",
"Te reto a demostrar cuánto te gusto"
    ];

    /* Barajar array */
    function mezclar(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    async function cargarFrase() {
        const box = document.getElementById("fraseBox");

        const ordenRef = ref(db, "orden");
        const posRef   = ref(db, "pos");

        const ordenSnap = await get(ordenRef);
        const posSnap   = await get(posRef);

        let orden = ordenSnap.exists() ? ordenSnap.val() : null;
        let pos = posSnap.exists() ? posSnap.val() : 0;

        if (!orden || orden.length !== frases.length) {
            orden = [...Array(frases.length).keys()];
            mezclar(orden);
            await set(ordenRef, orden);
            pos = 0;
            await set(posRef, 0);
        }

        const frase = frases[orden[pos]];
        box.textContent = frase;

        box.style.animation = "none";
        void box.offsetWidth;
        box.style.animation = "rebote 0.8s ease-out";

        pos++;

        if (pos >= frases.length) {
            orden = [...Array(frases.length).keys()];
            mezclar(orden);
            pos = 0;
            await set(ordenRef, orden);
        }

        await set(posRef, pos);
    }

    window.onload = cargarFrase;
</script>
</head>

<body>
    <div id="fondo"></div>
    <div id="fraseBox">Cargando...</div>
</body>
</html>
